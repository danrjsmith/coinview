!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react"),require("scheduler"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","scheduler","react-dom"],r):r((e=e||self).useContextSelector={},e.react,e.scheduler,e.reactDom)}(this,function(e,r,t,n){function o(){return(o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var u=Symbol(),c=Symbol(),i="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?r.useEffect:r.useLayoutEffect,s=function(e){return e};function a(e,t){var n=r.useContext(e)[u];if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!n)throw new Error("useContextSelector requires special context");var c=n.v.current,s=n.n.current,a=n.l,f=t(c),d=r.useReducer(function(e,r){if(s<r[0]){try{if(2===r.length&&(Object.is(e.value,r[1])||Object.is(e.selected,t(r[1]))))return e}catch(e){}return o({},e)}return Object.is(e.value,c)||Object.is(e.selected,f)?e:{value:c,selected:f}},{value:c,selected:f}),l=d[0],p=d[1];return i(function(){return a.add(p),function(){a.delete(p)}},[a]),l.selected}e.BridgeProvider=function(e){var t=e.value,n=e.children,o=e.context[c];if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!o)throw new Error("BridgeProvider requires special context");return r.createElement(o,{value:t},n)},e.createContext=function(e){var o,s,a=r.createContext(((o={})[u]={v:{current:e},n:{current:-1},l:new Set,u:function(e){return e()}},o));return a[c]=a.Provider,a.Provider=(s=a.Provider,function(e){var o=e.value,c=e.children,a=r.useRef(o),f=r.useRef(0),d=r.useRef();if(!d.current){var l,p=new Set;d.current=((l={})[u]={v:a,n:f,l:p,u:function(e){n.unstable_batchedUpdates(function(){f.current+=1,p.forEach(function(e){return e([f.current])}),e()})}},l)}return i(function(){a.current=o,f.current+=1,t.unstable_runWithPriority(t.unstable_NormalPriority,function(){d.current[u].l.forEach(function(e){e([f.current,o])})})},[o]),r.createElement(s,{value:d.current},c)}),delete a.Consumer,a},e.useBridgeValue=function(e){var t=r.useContext(e);if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!t[u])throw new Error("useBridgeValue requires special context");return t},e.useContext=function(e){return a(e,s)},e.useContextSelector=a,e.useContextUpdate=function(e){var t=r.useContext(e)[u];if("object"==typeof process&&"production"!==process.env.NODE_ENV&&!t)throw new Error("useContextUpdate requires special context");return t.u}});
//# sourceMappingURL=index.umd.js.map
