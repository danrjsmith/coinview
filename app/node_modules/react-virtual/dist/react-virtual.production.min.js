!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).ReactVirtual={},e.React)}(this,(function(e,t){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n,i=["bottom","height","left","right","top","width"],u=new Map,o=function e(){var t=[];u.forEach((function(e,r){var n,u,o=r.getBoundingClientRect();n=o,u=e.rect,void 0===n&&(n={}),void 0===u&&(u={}),i.some((function(e){return n[e]!==u[e]}))&&(e.rect=o,t.push(e))})),t.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),n=window.requestAnimationFrame(e)};var c="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function a(e,r){void 0===r&&(r={width:0,height:0});var i=t.useState(e.current),a=i[0],f=i[1],l=t.useReducer(s,r),d=l[0],v=l[1],h=t.useRef(!1);return c((function(){e.current!==a&&f(e.current)})),c((function(){if(a&&!h.current){h.current=!0;var e=a.getBoundingClientRect();v({rect:e})}}),[a]),t.useEffect((function(){if(a){var e,t,r=(e=a,t=function(e){v({rect:e})},{observe:function(){var r=0===u.size;u.has(e)?u.get(e).callbacks.push(t):u.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),r&&o()},unobserve:function(){var r=u.get(e);if(r){var i=r.callbacks.indexOf(t);i>=0&&r.callbacks.splice(i,1),r.callbacks.length||u.delete(e),u.size||cancelAnimationFrame(n)}}});return r.observe(),function(){r.unobserve()}}}),[a]),d}function s(e,t){var r=t.rect;return e.height!==r.height||e.width!==r.width?r:e}var f=function(){return 50},l=function(e){return e},d=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},v=function(e){for(var t=Math.max(e.start-e.overscan,0),r=Math.min(e.end+e.overscan,e.size-1),n=[],i=t;i<=r;i++)n.push(i);return n},h=function(e){var r=e.parentRef,n=e.horizontal,i=e.useObserver,u=e.initialRect,o=n?"scrollLeft":"scrollTop",s=t.useState(0),f=s[0],l=s[1],d=t.useState(r.current),v=d[0],h=d[1];c((function(){h(r.current)})),c((function(){if(v){var e=function(){l(v[o])};return e(),v.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){v.removeEventListener("scroll",e)}}l(0)}),[v,o]);var p=t.useCallback((function(e){r.current&&(r.current[o]=e)}),[r,o]),g=n?"width":"height";return{outerSize:(i||a)(r,u)[g],scrollOffset:f,scrollToFn:p}},p=function(e,r){void 0===r&&(r={width:0,height:0});var n=t.useState(r),i=n[0],u=n[1],o=t.useState(e.current),a=o[0],s=o[1];return c((function(){s(e.current)})),c((function(){if(a)return e(),a.addEventListener("resize",e),function(){a.removeEventListener("resize",e)};function e(){var e={width:a.innerWidth,height:a.innerHeight};u((function(t){return t.height!==e.height||t.width!==e.width?e:t}))}}),[a]),i},g=function(e){var r=e.windowRef,n=e.parentRef,i=e.horizontal,u=e.useWindowObserver,o=e.initialRect,a=t.useState(0),s=a[0],f=a[1],l=t.useState(r.current),d=l[0],v=l[1],h=t.useRef(0),g=i?"left":"top",m=i?"scrollX":"scrollY";c((function(){v(r.current)})),c((function(){if(!d)return h.current=0,void f(0);n.current&&(h.current=d[m]+n.current.getBoundingClientRect()[g]);var e=function(){var e=d[m]-h.current;f(e)};return e(),d.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){d.removeEventListener("scroll",e)}}),[d,m,g,n]);var w=t.useCallback((function(e,t){if(r.current){var n,i=["ToIndex","SizeChanged"].includes(t)?h.current:0;r.current.scrollTo(((n={})[g]=e+i,n))}}),[r,g]),R=i?"width":"height";return{outerSize:(u||p)(r,o)[R],scrollOffset:s,scrollToFn:w}},m=function(e){var n=e.parentRef,i=e.windowRef,u=void 0!==i,o=t.useRef(null),c=h(r(r({},e),{},{parentRef:u?o:n})),a=g(r(r({},e),{},{windowRef:u?i:o}));return u?a:c};e.defaultRangeExtractor=v,e.useDefaultScroll=m,e.useElementScroll=h,e.useVirtual=function(e){var n,i=e.size,u=void 0===i?0:i,o=e.estimateSize,a=void 0===o?f:o,s=e.overscan,h=void 0===s?1:s,p=e.paddingStart,g=void 0===p?0:p,w=e.paddingEnd,R=void 0===w?0:w,b=e.parentRef,z=e.windowRef,O=e.horizontal,S=e.scrollToFn,y=e.useObserver,k=e.useWindowObserver,E=e.initialRect,x=e.keyExtractor,C=void 0===x?l:x,M=e.measureSize,T=void 0===M?d:M,L=e.rangeExtractor,F=void 0===L?v:L,j=e.useScroll,W=void 0===j?m:j,A=t.useRef({scrollOffset:0,measurements:[]}),I=W({windowRef:z,parentRef:b,horizontal:O,useObserver:y,useWindowObserver:k,initialRect:E}),q=I.outerSize,B=I.scrollOffset,P=I.scrollToFn,H=t.useRef(B);A.current.scrollOffset!==B&&(H.current=B),A.current.outerSize=q,A.current.scrollOffset=B;var V=t.useCallback((function(e,t){(S||function(e){return P(e,t)})(e,P)}),[S,P]),_=t.useState({}),D=_[0],X=_[1],Y=t.useCallback((function(){return X({})}),[]),G=t.useRef([]),J=t.useMemo((function(){var e=G.current.length>0?Math.min.apply(Math,G.current):0;G.current=[];for(var t=A.current.measurements.slice(0,e),r=e;r<u;r++){var n=C(r),i=D[n],o=t[r-1]?t[r-1].end:g,c="number"==typeof i?i:a(r),s=o+c;t[r]={index:r,start:o,size:c,end:s,key:n}}return t}),[a,D,g,u,C]),K=((null==(n=J[u-1])?void 0:n.end)||0)+R;A.current.measurements=J,A.current.totalSize=K;var N=function(e){var t=e.measurements,r=e.outerSize,n=e.scrollOffset,i=t.length-1,u=function(e,t,r,n){for(;e<=t;){var i=(e+t)/2|0,u=r(i);if(u<n)e=i+1;else{if(!(u>n))return i;t=i-1}}return e>0?e-1:0}(0,i,(function(e){return t[e].start}),n),o=u;for(;o<i&&t[o].end<n+r;)o++;return{start:u,end:o}}(A.current),Q=N.start,U=N.end,Z=t.useMemo((function(){return F({start:Q,end:U,overscan:h,size:J.length})}),[Q,U,h,J.length,F]),$=t.useRef(T);$.current=T;var ee=t.useMemo((function(){for(var e=[],t=function(t,n){var i=Z[t],u=r(r({},J[i]),{},{measureRef:function(e){if(e){var t=$.current(e,O);if(t!==u.size){var n=A.current.scrollOffset;if(u.start<n){var o=t-u.size;H.current+=o,P(H.current,"SizeChanged")}G.current.push(i),X((function(e){var n;return r(r({},e),{},((n={})[u.key]=t,n))}))}}}});e.push(u)},n=0,i=Z.length;n<i;n++)t(n);return e}),[Z,P,O,J]),te=t.useRef(!1);c((function(){te.current&&X({}),te.current=!0}),[a]);var re=t.useCallback((function(e,t,r){var n=(void 0===t?{}:t).align,i=void 0===n?"start":n;void 0===r&&(r="ToOffset");var u=A.current,o=u.scrollOffset,c=u.outerSize;"auto"===i&&(i=e<=o?"start":e>=o+c?"end":"start"),"start"===i?V(e,r):"end"===i?V(e-c,r):"center"===i&&V(e-c/2,r)}),[V]),ne=t.useCallback((function(e,t){var n=void 0===t?{}:t,i=n.align,o=void 0===i?"auto":i,c=function(e,t){if(null==e)return{};var r,n,i={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(n,["align"]),a=A.current,s=a.measurements,f=a.scrollOffset,l=a.outerSize,d=s[Math.max(0,Math.min(e,u-1))];if(d){if("auto"===o)if(d.end>=f+l)o="end";else{if(!(d.start<=f))return;o="start"}var v="center"===o?d.start+d.size/2:"end"===o?d.end:d.start;re(v,r({align:o},c),"ToIndex")}}),[re,u]),ie=t.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];ne.apply(void 0,t),requestAnimationFrame((function(){ne.apply(void 0,t)}))}),[ne]);return{virtualItems:ee,totalSize:K,scrollToOffset:re,scrollToIndex:ie,measure:Y}},e.useWindowScroll=g,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=react-virtual.production.min.js.map
