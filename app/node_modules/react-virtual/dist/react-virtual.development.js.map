{"version":3,"file":"react-virtual.development.js","sources":["../node_modules/@reach/observe-rect/dist/observe-rect.esm.js","../src/useIsomorphicLayoutEffect.js","../src/useRect.js","../src/index.js"],"sourcesContent":["var props = ['bottom', 'height', 'left', 'right', 'top', 'width'];\n\nvar rectChanged = function rectChanged(a, b) {\n  if (a === void 0) {\n    a = {};\n  }\n\n  if (b === void 0) {\n    b = {};\n  }\n\n  return props.some(function (prop) {\n    return a[prop] !== b[prop];\n  });\n};\n\nvar observedNodes =\n/*#__PURE__*/\nnew Map();\nvar rafId;\n\nvar run = function run() {\n  var changedStates = [];\n  observedNodes.forEach(function (state, node) {\n    var newRect = node.getBoundingClientRect();\n\n    if (rectChanged(newRect, state.rect)) {\n      state.rect = newRect;\n      changedStates.push(state);\n    }\n  });\n  changedStates.forEach(function (state) {\n    state.callbacks.forEach(function (cb) {\n      return cb(state.rect);\n    });\n  });\n  rafId = window.requestAnimationFrame(run);\n};\n\nfunction observeRect(node, cb) {\n  return {\n    observe: function observe() {\n      var wasEmpty = observedNodes.size === 0;\n\n      if (observedNodes.has(node)) {\n        observedNodes.get(node).callbacks.push(cb);\n      } else {\n        observedNodes.set(node, {\n          rect: undefined,\n          hasRectChanged: false,\n          callbacks: [cb]\n        });\n      }\n\n      if (wasEmpty) run();\n    },\n    unobserve: function unobserve() {\n      var state = observedNodes.get(node);\n\n      if (state) {\n        // Remove the callback\n        var index = state.callbacks.indexOf(cb);\n        if (index >= 0) state.callbacks.splice(index, 1); // Remove the node reference\n\n        if (!state.callbacks.length) observedNodes[\"delete\"](node); // Stop the loop\n\n        if (!observedNodes.size) cancelAnimationFrame(rafId);\n      }\n    }\n  };\n}\n\nexport default observeRect;\n//# sourceMappingURL=observe-rect.esm.js.map\n","import React from 'react'\n\nexport default typeof window !== 'undefined'\n  ? React.useLayoutEffect\n  : React.useEffect\n","import React from 'react'\nimport observeRect from '@reach/observe-rect'\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nexport default function useRect(\n  nodeRef,\n  initialRect = { width: 0, height: 0 }\n) {\n  const [element, setElement] = React.useState(nodeRef.current)\n  const [rect, dispatch] = React.useReducer(rectReducer, initialRect)\n  const initialRectSet = React.useRef(false)\n\n  useIsomorphicLayoutEffect(() => {\n    if (nodeRef.current !== element) {\n      setElement(nodeRef.current)\n    }\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (element && !initialRectSet.current) {\n      initialRectSet.current = true\n      const rect = element.getBoundingClientRect()\n      dispatch({ rect })\n    }\n  }, [element])\n\n  React.useEffect(() => {\n    if (!element) {\n      return\n    }\n\n    const observer = observeRect(element, rect => {\n      dispatch({ rect })\n    })\n\n    observer.observe()\n\n    return () => {\n      observer.unobserve()\n    }\n  }, [element])\n\n  return rect\n}\n\nfunction rectReducer(state, action) {\n  const rect = action.rect\n  if (state.height !== rect.height || state.width !== rect.width) {\n    return rect\n  }\n  return state\n}\n","import React from 'react'\nimport useRect from './useRect'\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nconst defaultEstimateSize = () => 50\n\nconst defaultKeyExtractor = index => index\n\nconst defaultMeasureSize = (el, horizontal) => {\n  const key = horizontal ? 'offsetWidth' : 'offsetHeight'\n\n  return el[key]\n}\n\nexport const defaultRangeExtractor = range => {\n  const start = Math.max(range.start - range.overscan, 0)\n  const end = Math.min(range.end + range.overscan, range.size - 1)\n\n  const arr = []\n\n  for (let i = start; i <= end; i++) {\n    arr.push(i)\n  }\n\n  return arr\n}\n\nexport const useElementScroll = ({\n  parentRef,\n  horizontal,\n  useObserver,\n  initialRect,\n}) => {\n  const scrollKey = horizontal ? 'scrollLeft' : 'scrollTop'\n  const [scrollOffset, setScrollOffset] = React.useState(0)\n  const [element, setElement] = React.useState(parentRef.current)\n\n  useIsomorphicLayoutEffect(() => {\n    setElement(parentRef.current)\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (!element) {\n      setScrollOffset(0)\n\n      return\n    }\n\n    const onScroll = () => {\n      setScrollOffset(element[scrollKey])\n    }\n\n    onScroll()\n\n    element.addEventListener('scroll', onScroll, {\n      capture: false,\n      passive: true,\n    })\n\n    return () => {\n      element.removeEventListener('scroll', onScroll)\n    }\n  }, [element, scrollKey])\n\n  const scrollToFn = React.useCallback(\n    offset => {\n      if (parentRef.current) {\n        parentRef.current[scrollKey] = offset\n      }\n    },\n    [parentRef, scrollKey]\n  )\n\n  const useMeasureParent = useObserver || useRect\n\n  const sizeKey = horizontal ? 'width' : 'height'\n\n  const { [sizeKey]: outerSize } = useMeasureParent(parentRef, initialRect)\n\n  return {\n    outerSize,\n    scrollOffset,\n    scrollToFn,\n  }\n}\n\nconst useWindowRect = (windowRef, initialRect = { width: 0, height: 0 }) => {\n  const [rect, setRect] = React.useState(initialRect)\n  const [element, setElement] = React.useState(windowRef.current)\n\n  useIsomorphicLayoutEffect(() => {\n    setElement(windowRef.current)\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (!element) {\n      return\n    }\n\n    function resizeHandler() {\n      const next = {\n        width: element.innerWidth,\n        height: element.innerHeight,\n      }\n\n      setRect(prev =>\n        prev.height !== next.height || prev.width !== next.width ? next : prev\n      )\n    }\n    resizeHandler()\n\n    element.addEventListener('resize', resizeHandler)\n\n    return () => {\n      element.removeEventListener('resize', resizeHandler)\n    }\n  }, [element])\n\n  return rect\n}\n\nexport const useWindowScroll = ({\n  windowRef,\n  parentRef,\n  horizontal,\n  useWindowObserver,\n  initialRect,\n}) => {\n  const [scrollOffset, setScrollOffset] = React.useState(0)\n  const [element, setElement] = React.useState(windowRef.current)\n\n  const parentOffsetRef = React.useRef(0)\n\n  const rectKey = horizontal ? 'left' : 'top'\n  const scrollKey = horizontal ? 'scrollX' : 'scrollY'\n\n  useIsomorphicLayoutEffect(() => {\n    setElement(windowRef.current)\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (!element) {\n      parentOffsetRef.current = 0\n      setScrollOffset(0)\n\n      return\n    }\n\n    if (parentRef.current) {\n      parentOffsetRef.current =\n        element[scrollKey] + parentRef.current.getBoundingClientRect()[rectKey]\n    }\n\n    const onScroll = () => {\n      const offset = element[scrollKey] - parentOffsetRef.current\n      setScrollOffset(offset)\n    }\n\n    onScroll()\n\n    element.addEventListener('scroll', onScroll, {\n      capture: false,\n      passive: true,\n    })\n\n    return () => {\n      element.removeEventListener('scroll', onScroll)\n    }\n  }, [element, scrollKey, rectKey, parentRef])\n\n  const scrollToFn = React.useCallback(\n    (offset, reason) => {\n      if (windowRef.current) {\n        const delta = ['ToIndex', 'SizeChanged'].includes(reason)\n          ? parentOffsetRef.current\n          : 0\n\n        windowRef.current.scrollTo({ [rectKey]: offset + delta })\n      }\n    },\n    [windowRef, rectKey]\n  )\n\n  const useMeasureParent = useWindowObserver || useWindowRect\n\n  const sizeKey = horizontal ? 'width' : 'height'\n\n  const { [sizeKey]: outerSize } = useMeasureParent(windowRef, initialRect)\n\n  return {\n    outerSize,\n    scrollOffset,\n    scrollToFn,\n  }\n}\n\nexport const useDefaultScroll = props => {\n  const { parentRef, windowRef } = props\n\n  const useWindow = windowRef !== undefined\n\n  const emptyRef = React.useRef(null)\n\n  const elementRes = useElementScroll({\n    ...props,\n    parentRef: useWindow ? emptyRef : parentRef,\n  })\n\n  const windowRes = useWindowScroll({\n    ...props,\n    windowRef: useWindow ? windowRef : emptyRef,\n  })\n\n  return useWindow ? windowRes : elementRes\n}\n\nexport function useVirtual({\n  size = 0,\n  estimateSize = defaultEstimateSize,\n  overscan = 1,\n  paddingStart = 0,\n  paddingEnd = 0,\n  parentRef,\n  windowRef,\n  horizontal,\n  scrollToFn,\n  useObserver,\n  useWindowObserver,\n  initialRect,\n  keyExtractor = defaultKeyExtractor,\n  measureSize = defaultMeasureSize,\n  rangeExtractor = defaultRangeExtractor,\n  useScroll = useDefaultScroll,\n}) {\n  const latestRef = React.useRef({\n    scrollOffset: 0,\n    measurements: [],\n  })\n\n  const { outerSize, scrollOffset, scrollToFn: defaultScrollToFn } = useScroll({\n    windowRef,\n    parentRef,\n    horizontal,\n    useObserver,\n    useWindowObserver,\n    initialRect,\n  })\n\n  const scrollOffsetWithAdjustmentsRef = React.useRef(scrollOffset)\n  if (latestRef.current.scrollOffset !== scrollOffset) {\n    scrollOffsetWithAdjustmentsRef.current = scrollOffset\n  }\n\n  latestRef.current.outerSize = outerSize\n  latestRef.current.scrollOffset = scrollOffset\n\n  const scrollTo = React.useCallback(\n    (offset, reason) => {\n      const resolvedScrollToFn =\n        scrollToFn || (offset => defaultScrollToFn(offset, reason))\n\n      resolvedScrollToFn(offset, defaultScrollToFn)\n    },\n    [scrollToFn, defaultScrollToFn]\n  )\n\n  const [measuredCache, setMeasuredCache] = React.useState({})\n\n  const measure = React.useCallback(() => setMeasuredCache({}), [])\n\n  const pendingMeasuredCacheIndexesRef = React.useRef([])\n\n  const measurements = React.useMemo(() => {\n    const min =\n      pendingMeasuredCacheIndexesRef.current.length > 0\n        ? Math.min(...pendingMeasuredCacheIndexesRef.current)\n        : 0\n    pendingMeasuredCacheIndexesRef.current = []\n\n    const measurements = latestRef.current.measurements.slice(0, min)\n\n    for (let i = min; i < size; i++) {\n      const key = keyExtractor(i)\n      const measuredSize = measuredCache[key]\n      const start = measurements[i - 1] ? measurements[i - 1].end : paddingStart\n      const size =\n        typeof measuredSize === 'number' ? measuredSize : estimateSize(i)\n      const end = start + size\n      measurements[i] = { index: i, start, size, end, key }\n    }\n    return measurements\n  }, [estimateSize, measuredCache, paddingStart, size, keyExtractor])\n\n  const totalSize = (measurements[size - 1]?.end || 0) + paddingEnd\n\n  latestRef.current.measurements = measurements\n  latestRef.current.totalSize = totalSize\n\n  const { start, end } = calculateRange(latestRef.current)\n\n  const indexes = React.useMemo(\n    () =>\n      rangeExtractor({\n        start,\n        end,\n        overscan,\n        size: measurements.length,\n      }),\n    [start, end, overscan, measurements.length, rangeExtractor]\n  )\n\n  const measureSizeRef = React.useRef(measureSize)\n  measureSizeRef.current = measureSize\n\n  const virtualItems = React.useMemo(() => {\n    const virtualItems = []\n\n    for (let k = 0, len = indexes.length; k < len; k++) {\n      const i = indexes[k]\n      const measurement = measurements[i]\n\n      const item = {\n        ...measurement,\n        measureRef: el => {\n          if (el) {\n            const measuredSize = measureSizeRef.current(el, horizontal)\n\n            if (measuredSize !== item.size) {\n              const { scrollOffset } = latestRef.current\n\n              if (item.start < scrollOffset) {\n                const delta = measuredSize - item.size\n                scrollOffsetWithAdjustmentsRef.current += delta\n\n                defaultScrollToFn(\n                  scrollOffsetWithAdjustmentsRef.current,\n                  'SizeChanged'\n                )\n              }\n\n              pendingMeasuredCacheIndexesRef.current.push(i)\n\n              setMeasuredCache(old => ({\n                ...old,\n                [item.key]: measuredSize,\n              }))\n            }\n          }\n        },\n      }\n\n      virtualItems.push(item)\n    }\n\n    return virtualItems\n  }, [indexes, defaultScrollToFn, horizontal, measurements])\n\n  const mountedRef = React.useRef(false)\n\n  useIsomorphicLayoutEffect(() => {\n    if (mountedRef.current) {\n      setMeasuredCache({})\n    }\n    mountedRef.current = true\n  }, [estimateSize])\n\n  const scrollToOffset = React.useCallback(\n    (toOffset, { align = 'start' } = {}, reason = 'ToOffset') => {\n      const { scrollOffset, outerSize } = latestRef.current\n\n      if (align === 'auto') {\n        if (toOffset <= scrollOffset) {\n          align = 'start'\n        } else if (toOffset >= scrollOffset + outerSize) {\n          align = 'end'\n        } else {\n          align = 'start'\n        }\n      }\n\n      if (align === 'start') {\n        scrollTo(toOffset, reason)\n      } else if (align === 'end') {\n        scrollTo(toOffset - outerSize, reason)\n      } else if (align === 'center') {\n        scrollTo(toOffset - outerSize / 2, reason)\n      }\n    },\n    [scrollTo]\n  )\n\n  const tryScrollToIndex = React.useCallback(\n    (index, { align = 'auto', ...rest } = {}) => {\n      const { measurements, scrollOffset, outerSize } = latestRef.current\n\n      const measurement = measurements[Math.max(0, Math.min(index, size - 1))]\n\n      if (!measurement) {\n        return\n      }\n\n      if (align === 'auto') {\n        if (measurement.end >= scrollOffset + outerSize) {\n          align = 'end'\n        } else if (measurement.start <= scrollOffset) {\n          align = 'start'\n        } else {\n          return\n        }\n      }\n\n      const toOffset =\n        align === 'center'\n          ? measurement.start + measurement.size / 2\n          : align === 'end'\n          ? measurement.end\n          : measurement.start\n\n      scrollToOffset(toOffset, { align, ...rest }, 'ToIndex')\n    },\n    [scrollToOffset, size]\n  )\n\n  const scrollToIndex = React.useCallback(\n    (...args) => {\n      // We do a double request here because of\n      // dynamic sizes which can cause offset shift\n      // and end up in the wrong spot. Unfortunately,\n      // we can't know about those dynamic sizes until\n      // we try and render them. So double down!\n      tryScrollToIndex(...args)\n      requestAnimationFrame(() => {\n        tryScrollToIndex(...args)\n      })\n    },\n    [tryScrollToIndex]\n  )\n\n  return {\n    virtualItems,\n    totalSize,\n    scrollToOffset,\n    scrollToIndex,\n    measure,\n  }\n}\n\nconst findNearestBinarySearch = (low, high, getCurrentValue, value) => {\n  while (low <= high) {\n    let middle = ((low + high) / 2) | 0\n    let currentValue = getCurrentValue(middle)\n\n    if (currentValue < value) {\n      low = middle + 1\n    } else if (currentValue > value) {\n      high = middle - 1\n    } else {\n      return middle\n    }\n  }\n\n  if (low > 0) {\n    return low - 1\n  } else {\n    return 0\n  }\n}\n\nfunction calculateRange({ measurements, outerSize, scrollOffset }) {\n  const size = measurements.length - 1\n  const getOffset = index => measurements[index].start\n\n  let start = findNearestBinarySearch(0, size, getOffset, scrollOffset)\n  let end = start\n\n  while (end < size && measurements[end].end < scrollOffset + outerSize) {\n    end++\n  }\n\n  return { start, end }\n}\n"],"names":["props","rectChanged","b","observedNodes","run","changedStates","newRect","node","state","rafId","window","observeRect","cb","observe","wasEmpty","rect","hasRectChanged","callbacks","unobserve","index","cancelAnimationFrame","React","useLayoutEffect","useEffect","useRect","nodeRef","initialRect","width","height","useState","current","element","setElement","useReducer","rectReducer","dispatch","initialRectSet","useRef","useIsomorphicLayoutEffect","getBoundingClientRect","observer","action","defaultEstimateSize","defaultKeyExtractor","defaultMeasureSize","el","horizontal","key","defaultRangeExtractor","range","start","Math","max","overscan","end","min","size","arr","i","push","useElementScroll","parentRef","useObserver","scrollKey","scrollOffset","setScrollOffset","onScroll","addEventListener","capture","passive","removeEventListener","scrollToFn","useCallback","offset","useMeasureParent","sizeKey","outerSize","useWindowRect","windowRef","setRect","resizeHandler","next","innerWidth","innerHeight","prev","useWindowScroll","useWindowObserver","parentOffsetRef","rectKey","reason","delta","includes","scrollTo","useDefaultScroll","useWindow","undefined","emptyRef","elementRes","windowRes","useVirtual","estimateSize","paddingStart","paddingEnd","keyExtractor","measureSize","rangeExtractor","useScroll","latestRef","measurements","defaultScrollToFn","scrollOffsetWithAdjustmentsRef","resolvedScrollToFn","measuredCache","setMeasuredCache","measure","pendingMeasuredCacheIndexesRef","useMemo","length","slice","measuredSize","totalSize","calculateRange","indexes","measureSizeRef","virtualItems","k","len","measurement","item","measureRef","old","mountedRef","scrollToOffset","toOffset","align","tryScrollToIndex","rest","scrollToIndex","args","requestAnimationFrame","findNearestBinarySearch","low","high","getCurrentValue","value","middle","currentValue","getOffset"],"mappings":"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"}